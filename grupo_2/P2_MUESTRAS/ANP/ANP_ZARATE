/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var c05_bosque = /* color: #51d609 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50269114962981, -11.921526257272854],
                  [-76.502905726351, -11.923394793479739],
                  [-76.50097453586028, -11.923846179510251],
                  [-76.50082433215545, -11.922009138649056]]]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4969083069937, -11.921305811141522],
                  [-76.4951058625357, -11.922565500908494],
                  [-76.49387204638884, -11.922292568621868],
                  [-76.49607145778106, -11.920927903071224]]]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49941885463164, -11.922953904073857],
                  [-76.5000411271231, -11.92443402995908],
                  [-76.4985283612387, -11.923646729961458]]]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49854981891082, -11.926743430105436],
                  [-76.49765932551787, -11.92783513969445],
                  [-76.49588906756804, -11.927079341216176],
                  [-76.49671518794463, -11.925998125843098]]]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49317467204497, -11.927908619989717],
                  [-76.49216616145537, -11.928958336320196],
                  [-76.49149024478362, -11.927047849567222],
                  [-76.49288499347136, -11.926617463331644]]]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49659717074798, -11.930816324264843],
                  [-76.49652206889556, -11.93222292814007],
                  [-76.49565303317473, -11.931771556049798],
                  [-76.49571740619109, -11.930732347683266]]]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48942216688704, -11.924824594208351],
                  [-76.48992642218184, -11.926252223654606],
                  [-76.48849948698592, -11.926777085532798],
                  [-76.48711546713423, -11.925559404420447],
                  [-76.48944362455916, -11.924950561814631]]]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48955091291975, -11.92352292551886],
                  [-76.48942216688704, -11.924572658820335],
                  [-76.48822053724837, -11.924436193720823],
                  [-76.48824199492049, -11.923648893729473]]]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4842294102342, -11.925790344361761],
                  [-76.48477658087324, -11.927071007740992],
                  [-76.48400410467696, -11.927092002172241],
                  [-76.48358568007063, -11.925664377145418]]]),
            {
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49075254255843, -11.930556061073984],
                  [-76.4907310848863, -11.931637258276554],
                  [-76.48900374228072, -11.930807990904475],
                  [-76.48922904783797, -11.93007319491134]]]),
            {
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49232968145918, -11.932581990166897],
                  [-76.49127825552534, -11.933358767255108],
                  [-76.49092420393538, -11.931479802641476],
                  [-76.49191125685286, -11.931038926376807]]]),
            {
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48902519995283, -11.93189968413184],
                  [-76.48975476080489, -11.933526718765341],
                  [-76.4889822846086, -11.934188026825412],
                  [-76.48843511396956, -11.933022863922513],
                  [-76.48895009810042, -11.931931175217418]]]),
            {
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4910529499681, -11.932959882001315],
                  [-76.48992642218184, -11.933400755142411],
                  [-76.4892719631822, -11.931826204917977],
                  [-76.49053796583723, -11.9318052108532]]]),
            {
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4925120716722, -11.933579203590945],
                  [-76.49294122511458, -11.934870327101287],
                  [-76.49177178198408, -11.93538467540473],
                  [-76.491396272722, -11.933999081830004],
                  [-76.4925120716722, -11.933694670171517]]]),
            {
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4817617779405, -11.926283715395936],
                  [-76.48190125280928, -11.9275958680349],
                  [-76.48022755438399, -11.92722846593579],
                  [-76.48098930174422, -11.925842830684644]]]),
            {
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4818690663011, -11.927763823114454],
                  [-76.48201927000594, -11.928393653736503],
                  [-76.47984131628584, -11.928750557106444],
                  [-76.47965892607283, -11.92763785681454],
                  [-76.48087128454756, -11.927490896057373]]]),
            {
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48066743666243, -11.929327899798722],
                  [-76.48116096312117, -11.93101793225108],
                  [-76.48034557158064, -11.931227873435162],
                  [-76.48000224882674, -11.929527345170417]]]),
            {
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48257716948103, -11.928498625364643],
                  [-76.48269518667769, -11.929222928491539],
                  [-76.48184760862898, -11.92977927595659],
                  [-76.48157938772749, -11.928740059955212]]]),
            {
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48310288244795, -11.934922811666759],
                  [-76.48317798430037, -11.936234922500791],
                  [-76.48243769461226, -11.93491231475449],
                  [-76.48272737318587, -11.934555419495053]]]),
            {
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48384317213606, -11.93074500846879],
                  [-76.48412212187361, -11.931458808549884],
                  [-76.48308142477583, -11.931511293775806],
                  [-76.48323162848067, -11.930724014320317]]]),
            {
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47886499220442, -11.931206879324067],
                  [-76.47789939695906, -11.932477020119432],
                  [-76.4773844128282, -11.931878690072766],
                  [-76.4774380570085, -11.930965446929669],
                  [-76.47793158346724, -11.930377610635771]]]),
            {
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48058160597395, -11.932403541062014],
                  [-76.4797984009416, -11.933138330740029],
                  [-76.47944434935164, -11.932665966175618],
                  [-76.48009880835127, -11.932099127611997]]]),
            {
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48134335333418, -11.934125045174914],
                  [-76.48014172369551, -11.934146039060039],
                  [-76.47987350279402, -11.933421749083639],
                  [-76.48050650412154, -11.933138330740029]]]),
            {
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47724493795943, -11.930777905814965],
                  [-76.47722348028731, -11.932740851278249],
                  [-76.47656902128767, -11.932845821223568],
                  [-76.47654756361555, -11.93081989410195]]]),
            {
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47915467077803, -11.927943681413717],
                  [-76.47910102659773, -11.928951409038692],
                  [-76.47763117605757, -11.928856934732913],
                  [-76.47760971838545, -11.927513296599546]]]),
            {
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47716983610701, -11.929276820284487],
                  [-76.47705181891035, -11.930557467201636],
                  [-76.47593601996016, -11.930022115537499],
                  [-76.47679432684492, -11.929024889031549]]]),
            {
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47662266546797, -11.928961906181755],
                  [-76.47589310461592, -11.929780682088275],
                  [-76.47538884932112, -11.92757627978574],
                  [-76.47638663107466, -11.927838709570793]]]),
            {
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48689016157698, -11.926558049816022],
                  [-76.48689016157698, -11.92749230220089],
                  [-76.48638590628218, -11.927775726445535],
                  [-76.4860640412004, -11.927061916670517],
                  [-76.48648246580672, -11.92619064631126]]]),
            {
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48618205839705, -11.926001695743624],
                  [-76.4855597859056, -11.926893961156347],
                  [-76.48510917479109, -11.92615915455913],
                  [-76.48535593802046, -11.925161913850733]]]),
            {
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47528156096052, -11.924658043467234],
                  [-76.47487386519026, -11.926390093989879],
                  [-76.47398337179732, -11.924920476075409]]]),
            {
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48008807951521, -11.926977938926436],
                  [-76.48003443533491, -11.927544788194469],
                  [-76.47915467077803, -11.927261363708531],
                  [-76.47921904379439, -11.926862469485867]]]),
            {
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48082836920332, -11.925854734100023],
                  [-76.48008807951521, -11.926788988907187],
                  [-76.48013099485945, -11.925791750514108]]]),
            {
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49113878065657, -11.923650299892925],
                  [-76.49137481504988, -11.924679038085232],
                  [-76.49010881239485, -11.92475251923542],
                  [-76.49008735472273, -11.923891738798554]]]),
            {
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49141773039412, -11.925235394870148],
                  [-76.49147137457442, -11.926043684770024],
                  [-76.49034484678816, -11.926222138059742],
                  [-76.49017318541121, -11.925392854130422],
                  [-76.49143918806624, -11.925161913850733]]]),
            {
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49267300421309, -11.923555823740935],
                  [-76.49269446188521, -11.924490086464768],
                  [-76.49170740896773, -11.924658043467234],
                  [-76.49157866293501, -11.923681791936282]]]),
            {
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49282320791792, -11.9248155030626],
                  [-76.49293049627852, -11.92544534053021],
                  [-76.49175032431197, -11.925508324196542],
                  [-76.4917395954759, -11.924836497668409]]]),
            {
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49282320791792, -11.925697275107819],
                  [-76.49270519072127, -11.926295618791979],
                  [-76.49187907034468, -11.926327110528257],
                  [-76.49178251082014, -11.925739264181342]]]),
            {
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50067671591353, -11.928363568379153],
                  [-76.50021537596297, -11.929308311674648],
                  [-76.49936779791426, -11.929003894749913],
                  [-76.49990423971724, -11.92797517295867]]]),
            {
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49051650816511, -11.92889892331733],
                  [-76.49070962721419, -11.929591734021558],
                  [-76.48925050551009, -11.929371294444012],
                  [-76.48889645392012, -11.928458042856796]]]),
            {
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48879989439558, -11.926893961156347],
                  [-76.48860677534651, -11.92756578258905],
                  [-76.48740514570784, -11.927513296599546],
                  [-76.4874695187242, -11.92680998336027]]]),
            {
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49013027006697, -11.926956944486342],
                  [-76.48935779387068, -11.927702246114254],
                  [-76.48888572508406, -11.927187883237902],
                  [-76.48941143805098, -11.9267155083086]]]),
            {
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4850018864305, -11.92731384974679],
                  [-76.48464783484053, -11.928185116498268],
                  [-76.48401483351302, -11.92728235812505],
                  [-76.48487314039778, -11.927240369290372]]]),
            {
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48297413641524, -11.92452157841066],
                  [-76.48262008482527, -11.925151416560611],
                  [-76.48224457556319, -11.925182908429738],
                  [-76.48212655836653, -11.92438511328545],
                  [-76.4828775768907, -11.924017706837938]]]),
            {
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48495897108626, -11.925833739573013],
                  [-76.48445471579146, -11.926022690257632],
                  [-76.48426159674239, -11.924983459863597],
                  [-76.48463710600447, -11.924920476075409]]]),
            {
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48280247503828, -11.930022115537499],
                  [-76.4829848652513, -11.9302845429559],
                  [-76.48263081366133, -11.93054697012034],
                  [-76.48267372900557, -11.931040332501942],
                  [-76.48221238905501, -11.931071823687322],
                  [-76.48207291418623, -11.929885653179575]]]),
            {
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47792085463118, -11.925676280568622],
                  [-76.47808178717207, -11.926652524922526],
                  [-76.47712692076277, -11.92661053599037],
                  [-76.4768265133531, -11.92546633508728]]]),
            {
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48128970915388, -11.925550313299313],
                  [-76.4813648110063, -11.925928214931773],
                  [-76.48045285994124, -11.925728766913574],
                  [-76.4805708771379, -11.925403351411193]]]),
            {
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48257716948103, -11.926411088473836],
                  [-76.48200854116988, -11.926893961156347],
                  [-76.48194416815352, -11.926054182025617]]]),
            {
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48574284394648, -11.924577943797088],
                  [-76.48578575929072, -11.924987338675828],
                  [-76.4850695252546, -11.924892862989408],
                  [-76.48526264430367, -11.924336505502087]]]),
            {
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48506692727473, -11.923643681375763],
                  [-76.48501328309443, -11.924021585663972],
                  [-76.48439101060298, -11.923958601652487],
                  [-76.48431590875056, -11.92347572374539]]]),
            {
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48718050797847, -11.924451976017796],
                  [-76.48659042199519, -11.92514479808008],
                  [-76.48627928574946, -11.924567446484373],
                  [-76.4867191680279, -11.924053077664238]]]),
            {
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48771694978144, -11.924997835972283],
                  [-76.48695520242121, -11.925459716614418],
                  [-76.48662260850337, -11.925197284527854],
                  [-76.487277067503, -11.92465142497465]]]),
            {
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48306063493159, -11.927265242488183],
                  [-76.48291043122676, -11.927517175375607],
                  [-76.48240617593196, -11.927149773169912],
                  [-76.48272804101374, -11.92676137601137]]]),
            {
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49264148553279, -11.929669092586211],
                  [-76.49298480828669, -11.930571843014887],
                  [-76.49210504372981, -11.93039339258707],
                  [-76.49189046700862, -11.929606109886004]]]),
            {
              "system:index": "53"
            })]),
    c08_pastizal = /* color: #ffe909 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4929792403258, -11.921978139408465],
                  [-76.49304361334215, -11.922445273888536],
                  [-76.49277539244066, -11.922461019980583],
                  [-76.49279148569475, -11.921978139408465]]]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49330110540758, -11.921999134233822],
                  [-76.49311871519457, -11.922287812917684],
                  [-76.49309725752245, -11.921936149752886]]]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49051697245012, -11.922925529285312],
                  [-76.4905116080321, -11.923140725416848],
                  [-76.49021656504046, -11.923140725416848],
                  [-76.49022729387652, -11.922967518787791]]]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49021388283144, -11.922983264849545],
                  [-76.49019778957735, -11.92316172015225],
                  [-76.48997784843813, -11.923235201713362],
                  [-76.48996175518404, -11.923030503029333]]]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48990811100374, -11.923033127372417],
                  [-76.48992956867586, -11.923222080007479],
                  [-76.48966939440142, -11.923245699077627],
                  [-76.48969889870058, -11.92307774120089]]]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48998321285616, -11.923248323418612],
                  [-76.48998321285616, -11.923376916096474],
                  [-76.48986251345049, -11.923387413455245],
                  [-76.4898651956595, -11.923243074736593]]]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48966402998339, -11.923308683254591],
                  [-76.48947895756136, -11.923319180615993],
                  [-76.4894682287253, -11.92320895830097],
                  [-76.4896479367293, -11.9231800905444]]]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48625147440066, -11.92425489558635],
                  [-76.48607981302371, -11.924464842005163],
                  [-76.48601007558932, -11.924302133544744],
                  [-76.48614418604006, -11.924186662965246]]]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48665917017092, -11.923772018206552],
                  [-76.48656261064639, -11.923897986301519],
                  [-76.48639094926943, -11.923756272190559],
                  [-76.48651433088412, -11.92361980668044]]]),
            {
              "system:index": "8"
            })]),
    c09_arbustal_matorral = /* color: #d8e36f */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48124474289799, -11.92090534069225],
                  [-76.48055809739017, -11.921566679524915],
                  [-76.4802040458002, -11.920695391519473]]]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48004311325931, -11.92167165379458],
                  [-76.4797534346857, -11.922070555649023],
                  [-76.47932428124332, -11.921703146067571],
                  [-76.47982853653812, -11.921440710347708]]]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47932428124332, -11.921608669237655],
                  [-76.47886294129276, -11.92190259704493],
                  [-76.47858399155521, -11.921692648643653],
                  [-76.47912043335819, -11.921419715479145]]]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47797781231785, -11.922332990759799],
                  [-76.47780615094089, -11.922910347110104],
                  [-76.47725898030185, -11.922668907331234],
                  [-76.47770959141636, -11.9220495608292]]]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48017722371006, -11.923582178407667],
                  [-76.48015040161991, -11.923823617373905],
                  [-76.47972661259556, -11.923744887299826],
                  [-76.47974807026768, -11.923482453554563]]]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47866982224369, -11.92264266386406],
                  [-76.47837477925205, -11.922857860219928],
                  [-76.4782943129816, -11.922653161251239],
                  [-76.47858935597324, -11.922380229052777]]]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4787073731699, -11.923823617373905],
                  [-76.47872346642399, -11.924028315459623],
                  [-76.47842842343235, -11.924054558792768],
                  [-76.47841412049084, -11.923820555117665]]]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47773283940106, -11.922949274348849],
                  [-76.47765773754864, -11.92328519015737],
                  [-76.47712666016369, -11.923017507281111],
                  [-76.47727686386852, -11.922781316288633]]]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4780278823927, -11.923274692794646],
                  [-76.47790986519604, -11.9235161320345],
                  [-76.47768455963879, -11.923416407157124],
                  [-76.47775429707318, -11.923180216511886]]]),
            {
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47760409336834, -11.923369169044518],
                  [-76.47755044918804, -11.923642100248268],
                  [-76.47697645645886, -11.923474142616904],
                  [-76.47710520249157, -11.923106734935873]]]),
            {
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47799569588452, -11.92356861879734],
                  [-76.47794741612225, -11.923810057775652],
                  [-76.47765237313061, -11.92374707371507],
                  [-76.47770065289288, -11.923521380711238]]]),
            {
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47746461849957, -11.92371033300631],
                  [-76.47745925408154, -11.923894036500363],
                  [-76.47693890553265, -11.923741825042683],
                  [-76.47697645645886, -11.92353187806441]]]),
            {
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.48810225945263, -11.934926515380104],
                  [-76.48786622505932, -11.935052478294049],
                  [-76.487807216461, -11.934774310114316],
                  [-76.48801642876415, -11.934548626287045]]]),
            {
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49534958821087, -11.93363539213736],
                  [-76.49543541889935, -11.933992288608053],
                  [-76.49435180645733, -11.933540919463537],
                  [-76.49468440037518, -11.933110543532816]]]),
            {
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49631518345623, -11.934002785555956],
                  [-76.49629372578411, -11.934475147791108],
                  [-76.49547833424359, -11.934107755012679],
                  [-76.49580019932537, -11.933530422497745]]]),
            {
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49702328663616, -11.934490893184767],
                  [-76.49681943875103, -11.935031484479127],
                  [-76.49628299694805, -11.934574868602198],
                  [-76.49644929390698, -11.934139245841763]]]),
            {
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49757582169323, -11.9346588439936],
                  [-76.49758655052929, -11.935052478294049],
                  [-76.49701792221813, -11.935068223654172],
                  [-76.49708229523449, -11.934580117064922]]]),
            {
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49604511486429, -11.93567881036142],
                  [-76.49591100441354, -11.935841511996024],
                  [-76.49545502888101, -11.935594835286002],
                  [-76.49570715652841, -11.93555284773852]]]),
            {
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49677656871656, -11.936004213532946],
                  [-76.49644933921674, -11.93606719474683],
                  [-76.49609875904459, -11.935925486995021],
                  [-76.49631333576578, -11.935720797889385]]]),
            {
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4989813445268, -11.924378680553646],
                  [-76.4990349887071, -11.925312940444],
                  [-76.49833761436322, -11.925344432294372],
                  [-76.498477089232, -11.924420669831246]]]),
            {
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49833761436322, -11.924473156419106],
                  [-76.49814449531415, -11.92538642142251],
                  [-76.49768315536359, -11.925365426859255],
                  [-76.49776898605207, -11.924378680553646]]]),
            {
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49753295165875, -11.92445216178518],
                  [-76.49754368049481, -11.925438907823533],
                  [-76.49693213683942, -11.925428410544137],
                  [-76.49714671356061, -11.924420669831246]]]),
            {
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49706088287213, -11.924473156419106],
                  [-76.49669610244611, -11.925428410544137],
                  [-76.4960631011186, -11.92538642142251],
                  [-76.49653516990521, -11.924336691269545]]]),
            {
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.49754368049481, -11.923664861840162],
                  [-76.49758659583905, -11.923958787420199],
                  [-76.49626694900373, -11.923685856535018],
                  [-76.49626694900373, -11.923150491308956]]]),
            {
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50011860114911, -11.924966529848719],
                  [-76.50024734718183, -11.925449405102519],
                  [-76.49928175193646, -11.925344432294372],
                  [-76.49919592124799, -11.924609621500032]]]),
            {
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.5088834131397, -11.927821779734105],
                  [-76.50849717504155, -11.928168186683209],
                  [-76.50828324539044, -11.927769293794139],
                  [-76.50884114486554, -11.927496366742552]]]),
            {
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.5099992120899, -11.92793724876629],
                  [-76.50911944753301, -11.927916254400456],
                  [-76.50926965123784, -11.927527858339435]]]),
            {
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50330441838872, -11.927890011440887],
                  [-76.50323468095434, -11.928099955046399],
                  [-76.50296109563482, -11.927821779734105],
                  [-76.50308984166753, -11.92766432188372]]]),
            {
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50570767766607, -11.91995927275535],
                  [-76.50571840650213, -11.920242704868969],
                  [-76.50469916707647, -11.92027419730777],
                  [-76.50481718427312, -11.919938277772196]]]),
            {
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50292890912664, -11.918928713031768],
                  [-76.50264995938909, -11.919642544202976],
                  [-76.50208133107793, -11.919495579115305]]]),
            {
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50422709828985, -11.931430984459038],
                  [-76.5036423767246, -11.932197267827442],
                  [-76.50326686746251, -11.93202406698155],
                  [-76.50381403810155, -11.931173806678794]]]),
            {
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.50430220014226, -11.930885137451243],
                  [-76.50422709828985, -11.931305019862455],
                  [-76.50390523320806, -11.93116855815013],
                  [-76.50411980992925, -11.930780166746839]]]),
            {
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4796754924848, -11.923565972568822],
                  [-76.47957893296027, -11.923859898255982],
                  [-76.47926779671454, -11.923607961972209]]]),
            {
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.4805928079679, -11.923660448717277],
                  [-76.4806303588941, -11.923817908891603],
                  [-76.4803245870664, -11.923849400915495],
                  [-76.48035677357458, -11.923686692086017]]]),
            {
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47957893296027, -11.92426929421821],
                  [-76.47965403481268, -11.924416256720649],
                  [-76.47925706787848, -11.924463494650942],
                  [-76.47920342369818, -11.924290288866295]]]),
            {
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-76.47883327885413, -11.923088342648109],
                  [-76.4788279144361, -11.92320381369501],
                  [-76.47854360028052, -11.923193316329142],
                  [-76.47847386284613, -11.923041104478383]]]),
            {
              "system:index": "35"
            })]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/**** SERNANP - COLECTA DE MUESTRAS ANP ZARATE ****/ //CAMBIAR T√çTLO SEG√öN ANP

// === Importar m√≥dulo con utilidades Planet ===
var mosaic = require('users/ryali93/lulc:UTILES/planet.js'); // usa funci√≥n getPlanetMonthlyImage()


//----------------------------------------------------
// 1. PAR√ÅMETROS GENERALES
//----------------------------------------------------
var version = '1';
var year = 2023;
var regionId = 'ZR13';
var region = 'ZARATE';// Cambiar c√≥digo seg√∫n ANP
var tipo_muestra = 'MultiClass';  // 'MultiClass' o 'Urban_mining'

//----------------------------------------------------
// 2. CAPAS BASE
//----------------------------------------------------
var area_anp = ee.FeatureCollection(
  'projects/royyali/assets/anps_grupo2'
).filter(ee.Filter.eq('codigo', regionId));

var area_trabajo = ee.FeatureCollection('projects/ee-teledetecciondde/assets/Shp_ANP_ZA_ZR_ACR_ACP_Dissolve').filter(ee.Filter.eq('CODIGO', regionId));


var MapBiomas = ee.Image('projects/mapbiomas-public/assets/peru/collection3/mapbiomas_peru_collection3_integration_v1')
  .select('classification_' + year);

var WorldCover = ee.ImageCollection('ESA/WorldCover/v200').first().select('Map');

//----------------------------------------------------
// 3. COLORES Y CLASES
//----------------------------------------------------
var MB_COLORS = {
  1:'#1f8d49',3:'#1f8d49',4:'#76c975',5:'#04381d',6:'#026975',
  9:'#7a5900',10:'#b6db74',11:'#519769',12:'#dbbc74',13:'#b6db74',
  15:'#edd88e',18:'#e97e4d',21:'#ffcf63',22:'#d4271e',23:'#ffa07a',
  24:'#d4271e',25:'#db4b4b',27:'#ffffff',29:'#a3b58e',30:'#9c0027',
  31:'#091077',32:'#f5d1d5',33:'#2532e4',34:'#93d6f6',35:'#9056d0',
  40:'#c71585',61:'#dcdcdc',66:'#a39358',68:'#f9a47a',70:'#fbe9e0',
  72:'#f1d5ae'
};

var MB_CLASSES = {
  3:'Bosque',4:'Bosque seco',5:'Manglar',6:'Bosque inundable',
  9:'Plantaci√≥n forestal',11:'Zona pantanosa/pastizal inun.',
  12:'Pastizal/herbazal',13:'Otra no boscosa',15:'Pasto',
  18:'Agricultura',21:'Mosaico agropecuario',23:'Playa',
  24:'Infraestructura urbana',25:'Otra √°rea sin veg.',
  29:'Afloramiento rocoso',30:'Miner√≠a',31:'Acuicultura',
  32:'Salina costera',33:'R√≠o/lago/oc√©ano',34:'Glaciar',
  35:'Palma aceitera',40:'Arroz',61:'Salar',66:'Matorral',
  68:'√Årea natural sin veg.',70:'Loma costera',72:'Otros cultivos',
  27:'No observado'
};

var WC_CLASSES = {
  10:'Bosque',20:'Matorrales',30:'Pastizales',40:'Cultivos',
  50:'Construcciones',60:'Escasa vegetaci√≥n',70:'Nieve/hielo',
  80:'Agua',90:'Humedales herb√°ceos',95:'Manglares',100:'Musgo/l√≠quenes'
};

var WC_COLOR_TABLE = {
  10:'#006400',20:'#ffbb22',30:'#ffff4c',40:'#f096ff',
  50:'#fa0000',60:'#b4b4b4',70:'#f0f0f0',80:'#0064c8',
  90:'#0096a0',95:'#00cf75',100:'#fae6a0'
};

//----------------------------------------------------
// 4. PANEL DE CONTROL
//----------------------------------------------------
var controlPanel = ui.Panel({style: {position: 'top-left', padding: '8px'}});

controlPanel.add(ui.Label({
  value: 'COLECTA DE MUESTRAS -' + region,
  style: {fontWeight: 'bold', width:'150px',fontSize: '16px', margin: '0 0 4px 0'}
}));

var monthSelect = ui.Select({
  items: [
    {label: 'Enero', value: 1},{label: 'Febrero', value: 2},{label: 'Marzo', value: 3},
    {label: 'Abril', value: 4},{label: 'Mayo', value: 5},{label: 'Junio', value: 6},
    {label: 'Julio', value: 7},{label: 'Agosto', value: 8},{label: 'Septiembre', value: 9},
    {label: 'Octubre', value: 10},{label: 'Noviembre', value: 11},{label: 'Diciembre', value: 12}
  ],
  value: 6,
  onChange: updateLayer
});
controlPanel.add(ui.Label('Selecciona mes:'));
controlPanel.add(monthSelect);


// --- Etiqueta din√°mica para coordenadas ---
var coordLabel = ui.Label({
  value: 'üìç Haz clic en el mapa para ver coordenadas',
  style: {fontSize: '12px', color: 'gray', margin: '8px 0 0 0'}
});
controlPanel.add(coordLabel);

////
ui.root.insert(0, controlPanel);

// Panel leyendas (se usar√°n dos: una para MapBiomas, otra para WorldCover)
var legendPanel = ui.Panel({style:{position:'bottom-left', padding:'8px'}});
ui.root.add(legendPanel);

//----------------------------------------------------
// 5. FUNCIONES AUXILIARES
//----------------------------------------------------
function sortNumericArray(arrStr) {
  return arrStr.map(function(s){ return parseInt(s,10); }).sort(function(a,b){return a-b;});
}

function prepareRemapAndPalette(image, geom, bandName, colorDict, classNamesDict, callback) {
  var freq = image.reduceRegion({
    reducer: ee.Reducer.frequencyHistogram(),
    geometry: geom,
    scale: 30,
    maxPixels: 1e13
  }).get(bandName);

  ee.Dictionary(freq).keys().evaluate(function(classKeys) {
    if (!classKeys || !classKeys.length) { callback(null); return; }

    var origIds = sortNumericArray(classKeys);
    var palette = [], from = [], to = [], names = [];
    for (var i = 0; i < origIds.length; i++) {
      var id = origIds[i];
      from.push(id); to.push(i + 1);
      palette.push(colorDict[id] || '#FFFFFF');
      names.push(classNamesDict[id] || ('Clase ' + id));
    }
    var remapped = image.remap(from, to).rename('remap');
    callback({remappedImage: remapped, palette: palette, origIds: origIds, names: names});
  });
}

function drawLegend(origIds, names, palette, title) {
  var p = ui.Panel({style:{padding:'8px 12px', backgroundColor:'rgba(255,255,255,0.9)', margin:'4px'}});
  p.add(ui.Label({value: title, style:{fontWeight:'bold', fontSize:'14px', margin:'0 0 6px 0'}}));

  var grid = ui.Panel({layout: ui.Panel.Layout.Flow('horizontal')});
  var col1 = ui.Panel({layout: ui.Panel.Layout.Flow('vertical'), style:{padding:'0 8px'}});
  var col2 = ui.Panel({layout: ui.Panel.Layout.Flow('vertical'), style:{padding:'0 8px'}});

  for (var i = 0; i < origIds.length; i++) {
    var color = palette[i];
    var name = names[i];
    var row = ui.Panel({
      layout: ui.Panel.Layout.Flow('horizontal'),
      widgets: [
        ui.Label('', {backgroundColor: color, padding: '6px', margin: '0 8px 6px 0', border: '1px solid #999'}),
        ui.Label(origIds[i] + ' ‚Äì ' + name, {fontSize: '12px', margin: '0 0 6px 0'})
      ]
    });
    if (i % 2 === 0) col1.add(row); else col2.add(row);
  }
  grid.add(col1); grid.add(col2); p.add(grid);
  legendPanel.add(p);
}

//----------------------------------------------------
// 6. FUNCI√ìN PRINCIPAL: CARGA AMBAS REFERENCIAS
//----------------------------------------------------
function updateLayer() {
  Map.layers().reset();
  legendPanel.clear();

  var month = parseInt(monthSelect.getValue());
  var planetImage = mosaic.getPlanetMonthlyImage(year, month, area_trabajo.geometry());
  var rgbVis = {bands: ['R','G','B'], min: 0, max: 80, gamma: 1.6};
  Map.addLayer(planetImage, rgbVis, 'Planet ' + year + ' M' + month, true);

  Map.addLayer(planetImage.select('NDVI'),
    {min: 0.0, max: 0.8, palette: ['#a50026','#d73027','#f46d43','#fdae61','#fee08b','#d9ef8b','#a6d96a','#1a9850','#006837']},
    'NDVI ' + year + ' M' + month, false);

  Map.addLayer(planetImage.select('NDWI'),
    {min: -1, max: 1, palette: ['#ffeda0', '#253494', '#2c7fb8']},
    'NDWI ' + year + ' M' + month, false);

  var ndsi = planetImage.normalizedDifference(['G','N']).rename('NDSI');
  Map.addLayer(ndsi, {min: -0.5, max: 1.0, palette: ['#0000ff', '#00ffff', '#ffffff']}, 'NDSI', false);

  // --- A√±adir MapBiomas ---
  prepareRemapAndPalette(MapBiomas.clip(area_trabajo), area_trabajo.geometry(), 'classification_' + year,
    MB_COLORS, MB_CLASSES, function(result) {
      if (result) {
        Map.addLayer(result.remappedImage.clip(area_trabajo),
          {min: 1, max: result.palette.length, palette: result.palette},
          'MapBiomas Per√∫ C3 (' + year + ')', true);
        drawLegend(result.origIds, result.names, result.palette, 'MapBiomas C3 (' + year + ')');
      } else {
        ui.alert('No se encontraron clases MapBiomas en el √°rea.');
      }
    });

  // --- A√±adir WorldCover ---
  prepareRemapAndPalette(WorldCover.clip(area_trabajo), area_trabajo.geometry(), 'Map',
    WC_COLOR_TABLE, WC_CLASSES, function(result) {
      if (result) {
        Map.addLayer(result.remappedImage.clip(area_trabajo),
          {min: 1, max: result.palette.length, palette: result.palette},
          'WorldCover (2021)', true);
        drawLegend(result.origIds, result.names, result.palette, 'WorldCover (2021)');
      } else {
        ui.alert('No se encontraron clases WorldCover en el √°rea.');
      }
    });

  // --- L√≠mite ANP ---
  Map.addLayer(area_trabajo.style({color: 'cyan', fillColor: '00000000'}), {}, 'L√≠mite ANP + ZA', true);
  Map.addLayer(area_anp.style({color: 'red', fillColor: '00000000'}), {}, 'L√≠mite ANP', true);
}
  Map.centerObject(area_trabajo)

// Carga inicial
updateLayer();
//----------------------------------------------------
// 7. CAPTURAR COORDENADAS CON CLICK EN EL MAPA
//----------------------------------------------------
// var lastPointLayer;
// Map.onClick(function(coords) {
//   var lon = coords.lon.toFixed(6);
//   var lat = coords.lat.toFixed(6);

//   coordLabel.setValue('üìç Long: ' + lon + ' | Lat: ' + lat);
//   print('üìç Coordenadas:', lon, lat);

//   if (lastPointLayer) Map.remove(lastPointLayer);
//   var punto = ee.Geometry.Point([lon, lat]);
//   lastPointLayer = Map.addLayer(punto, {color: 'magenta'}, 'coordenada');
// })

//----------------------------------------------------
// 8. EXPORTAR MUESTRAS MANUALES
//----------------------------------------------------

// (al terminar de dibujar tus pol√≠gonos de muestra)
// var list_geom = ee.FeatureCollection([Bosque, Pastizal, Urbano, Mineria]).flatten();

// Export.table.toAsset({
//   collection: list_geom,
//   description: tipo_muestra + '-' + year + '-draw-' + version,
//   assetId: 'projects/ee-anp-lineabase/assets/AUXILIAR-DATA/geometry/' +
//             tipo_muestra + '-' + year + '-draw-' + version
// });
